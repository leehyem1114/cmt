<!DOCTYPE html>
<!-- Thymeleaf ë° ë ˆì´ì•„ì›ƒ ì„ ì–¸ - ë ˆì´ì•„ì›ƒ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í•„ìˆ˜ ì„ ì–¸ -->
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	layout:decorate="~{layouts/layout}">
<head>
<!-- ê¸°ë³¸ ë©”íƒ€ ì •ë³´ -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CMT</title>
<style>

	.container {
		display: grid;
		grid-template-columns:  120px 180px 120px 180px 120px 180px 50px 180px 150px 1fr;
	    gap: 3px;
	    background: #f5f5f5;
	    padding: 4px;
	    border-radius: 5px;
		border : 1px solid black;
		text-align: center;
		max-width: 100vw;
	}
	
	.container input, .container select {
		padding: 5px;
		border: 1px solid #ccc;
		border-radius: 3px;
	}
	 
	.button-container {
		display: flex;
		gap: 5px;
		margin: 10px;
		justify-content: space-between;
	}
		
	button {
		padding: 5px 10px;
	    border: none;
	    cursor: pointer;
	    border-radius: 3px;
	}
	
	.btnSearch { background:dodgerblue; color: white; }
	.calculate { background:dodgerblue; color: white; }
	.print { background: purple; color: white; }
	.transfer { background: green; color: white; }
	.delete { background: red; color: white; }

</style>
</head>
<body>
	<!-- 
        ì¤‘ìš”: layout:fragment="content"ëŠ” ë ˆì´ì•„ì›ƒ í…œí”Œë¦¿ì— ì‹¤ì œ í˜ì´ì§€ ë‚´ìš©ì´ ì‚½ì…ë  ìœ„ì¹˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
        ì´ ë¶€ë¶„ ì•ˆì— í˜ì´ì§€ë³„ HTML ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”.
    -->
	<div layout:fragment="content">

		<div class="button-container">
			<div>
				<h2>ê¸‰ì—¬ ì¡°íšŒ</h2>
			</div>
			<div>
				<button class="calculate" data-bs-toggle="modal"
					data-bs-target="#payCalcModal">ğŸ“ƒ ê¸‰ì—¬ ê³„ì‚°ê¸°</button>
				<button class="print">âœï¸ ëª…ì„¸ì„œ ì¶œë ¥</button>
				<button class="transfer" data-bs-toggle="modal"
					data-bs-target="#payTransferModal">â“ ê¸‰ì—¬ ì´ì²´</button>
			</div>
		</div>

		<form action="@{/salaries/searchPayList}" method="get" th:object="${paySearchDTO}">
			<div class="container">
				<label class="deptLabel">ë¶€ì„œ</label> <select class="form-select"
					id="dept" name="dept">
					<option th:each="dept : ${deptList}"
						th:value="${dept.cmnDetailCode}" th:text="${dept.cmnDetailName}"></option>
				</select> <label class="emp-Label">ì´ë¦„</label> <input type="text" class=""
					id="empName" maxlength="9" th:field="*{empName}"> <label
					class="payLabel">ì§€ê¸‰ì¼</label> <input type="date" id="minDate"
					th:field="*{minDate}">~ <input type="date" id="maxDate"
					th:field="*{maxDate}">
				<button type="submit" class="btnSearch">ğŸ” ê²€ìƒ‰</button>
				<span></span>
			</div>
		</form>

		<br>

		<!-- ê·¸ë¦¬ë“œ top ì‹œì‘ -->
		<div id="gridTop"></div>

		<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
		<script th:inline="javascript">
	    
	    const grid = new tui.Grid({
	        el: document.getElementById('gridTop'), 
			data : /*[[${payList}]]*/ [],
	        rowHeaders: ['checkbox'], 
	        columns: [
				{
	                header: 'ì§€ê¸‰ì¼',
	                name: 'payDate',
	            	sortable: true
	            },
	            {
	                header: 'ì‚¬ì›ë²ˆí˜¸',
	                name: 'empNo',
	                sortable: true
	            },
	            {
	                header: 'ì‚¬ì›ëª…',
	                name: 'empName',
	            },
	            {
	                header: 'ë¶€ì„œ',
	                name: 'deptName', 
		            sortable: true
	            },
	            {
	                header: 'ì§ê¸‰',
	                name: 'position', 
	            	sortable: true
	            },
	            {
	                header: 'ê³ ìš©ìœ í˜•',
	                name: 'empType'
	            },
	            {
	                header: 'ê¸°ë³¸ê¸‰',
	                name: 'payBasic'
	            },
	            {
	                header: 'ì•¼ê·¼ìˆ˜ë‹¹',
	                name: 'payBonusOvertime'
	            },
	            {
	                header: 'ëª…ì ˆìˆ˜ë‹¹',
	                name: 'payBonusHoliday'
	            },
	            {
	                header: 'ì´ìˆ˜ë‹¹ê¸ˆì•¡',
	                name: 'payBonusTotal'
	            },
	            {
	                header: 'êµ­ë¯¼ì—°ê¸ˆ',
	                name: 'payTaxPension'
	            },
	            {
	                header: 'ê±´ê°•ë³´í—˜',
	                name: 'payTaxHealth'
	            },
	            {
	                header: 'ì¥ê¸°ìš”ì–‘ë³´í—˜',
	                name: 'payTaxCare'
	            },
	            {
	                header: 'ê³ ìš©ë³´í—˜',
	                name: 'payTaxEmployment'
	            },
	            {
	                header: 'ì†Œë“ì„¸',
	                name: 'payTaxIncome'
	            },
	            {
	                header: 'ì£¼ë¯¼ì„¸',
	                name: 'payTaxResidence'
	            },
	            {
	                header: 'ì´ê³µì œê¸ˆì•¡',
	                name: 'payTaxTotal'
	            },
	            {
	                header: 'ì‹¤ìˆ˜ë ¹ì•¡',
	                name: 'payTotal'
	            },
	            {
	                header: 'ì§€ê¸‰ìƒíƒœ',
	                name: 'payStatus',
	                sortable: true
	            }
	        ] // ì—´ ì„¤ì •
	    });
	    
	 	// ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì¶”ê°€
	    grid.on('check', (checkItem) => {
	        console.log("ì²´í¬ í™•ì¸");
	    });

	    // ì²´í¬ í•´ì œ ì‹œ ì´ë²¤íŠ¸ ì¶”ê°€
	    grid.on('uncheck', (checkItem) => {
	    	console.log("ì²´í¬ í•´ì œ í™•ì¸");
	    });

	    </script>
		<!-- ê·¸ë¦¬ë“œ ë -->


		<!-- ê¸‰ì—¬ ê³„ì‚°ê¸° ëª¨ë‹¬ -->
		<div class="modal fade" id="payCalcModal" tabindex="-1"
			aria-labelledby="payCalcModal" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="payCalcModal">ê¸‰ì—¬ ê³„ì‚°ê¸°</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<label for="pay">ê¸‰ì—¬</label>
						<div class="input-group mb-2">
							<input type="text" id="pay" class="form-control"
								placeholder="ê¸‰ì—¬ ì…ë ¥"> <span class="input-group-text">ì›</span>
							<button type="button" class="btn btn-secondary ms-2"
								onclick="simulatePay()">ê³„ì‚°í•˜ê¸°</button>
						</div>
						<label for="payList"></label>
						<h6 class="text-primary mb-3">ì§€ê¸‰í•­ëª©</h6>
						<div class="row mb-2">
							<div class="col-6">ê¸‰ì—¬</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<h6 class="text-primary mb-3">ê³µì œí•­ëª©</h6>
						<div class="row mb-2">
							<div class="col-6">êµ­ë¯¼ì—°ê¸ˆ</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ê±´ê°•ë³´í—˜</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ì¥ê¸°ìš”ì–‘ë³´í—˜</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ê³ ìš©ë³´í—˜</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ì†Œë“ì„¸</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ì£¼ë¯¼ì„¸</div>
							<div class="col-6 text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ì´ ê³µì œì•¡</div>
							<div class="col-6 text-danger text-end">ì›</div>
						</div>
						<label for="salItemCalc"></label>
						<div class="row mb-2">
							<div class="col-6">ì˜ˆìƒ ì‹¤ ìˆ˜ë ¹ì•¡</div>
							<div class="col-6 text-danger text-end">ì›</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">ë‹«ê¸°</button>
					</div>
				</div>
			</div>
		</div><!-- ê¸‰ì—¬ ê³„ì‚°ê¸° ëª¨ë‹¬ -->

		<!-- ê¸‰ì—¬ ì´ì²´ ëª¨ë‹¬ -->
		<div class="modal fade" id="payTransferModal" tabindex="-1"
			aria-labelledby="payTransferModal" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="payCalcModal">ê¸‰ì—¬ ì´ì²´</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="input-group mb-2">
							<input type="date" id="payDate" class="form-control">
						</div>
						<div class="input-group mb-2">
							<select class="form-select" id="dept" name="dept">
								<option th:each="dept : ${deptList}"
									th:value="${dept.cmnDetailCode}"
									th:text="${dept.cmnDetailName}"></option>
							</select>
  						<div class="input-group mb-2">
							<select class="form-select" id="position" name="position">
								<option th:each="code : ${commonCodeMap['POSITION']}"
									th:value="${code.cmnDetailCode}"
									th:text="${code.cmnDetailName}"></option>
							</select>
							<button type="submit" class="btn btn-secondary ms-2">ì¡°íšŒ</button>
						</div>
						<!-- ê·¸ë¦¬ë“œ top ì‹œì‘ -->
						<div id="gridTop2"></div>
						<!-- ê·¸ë¦¬ë“œ ë -->
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">ë‹«ê¸°</button>
							<button type="button" class="btn btn-primary"
								data-bs-dismiss="modal">ì´ì²´</button>
						</div>
					</div>
				</div>
			</div>
		</div><!-- ê¸‰ì—¬ ì´ì²´ ëª¨ë‹¬ -->
	</div>
</div>	
	<!-- 
        í˜ì´ì§€ë³„ JavaScript ì¶”ê°€ ì˜ì—­.
        ì—¬ê¸°ì— í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
        ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë ˆì´ì•„ì›ƒì—ì„œ ìë™ìœ¼ë¡œ í¬í•¨ë©ë‹ˆë‹¤.
    -->
	<th:block layout:fragment="script">
		<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
		<script th:inline="javascript">
			$('#payTransferModal').on('shown.bs.modal', function () {

				const grid2 = new tui.Grid({
				el: document.getElementById('gridTop2'), 
				data : /*[[${empList}]]*/ [],
				rowHeaders: ['checkbox'], 
				columns: [
					{
						header: 'ì‚¬ì›ë²ˆí˜¸',
						name: 'empNo'
					},
					{
						header: 'ì‚¬ì›ëª…',
						name: 'empName',
					},
					{
						header: 'ë¶€ì„œ',
						name: 'deptName', 
						sortable: true
					},
					{
						header: 'ì§ê¸‰',
						name: 'deptPosition', 
						sortable: true
					}	
				] // ì—´ ì„¤ì •
			});
	    				
			console.log("empList:", /*[[${empList}]]*/ []);
	    
			// ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì¶”ê°€
			grid2.on('check', (checkItem) => {
				console.log("ì²´í¬ í™•ì¸");
			});

			// ì²´í¬ í•´ì œ ì‹œ ì´ë²¤íŠ¸ ì¶”ê°€
			grid2.on('uncheck', (checkItem) => {
				console.log("ì²´í¬ í•´ì œ í™•ì¸");
			}); 
		});	
		</script>
	</th:block>
</body>
</html>
